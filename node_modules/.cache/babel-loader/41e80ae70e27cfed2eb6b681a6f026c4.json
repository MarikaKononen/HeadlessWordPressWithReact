{"ast":null,"code":"import _Object$values from \"@babel/runtime-corejs2/core-js/object/values\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React, { Component } from 'react';\n\nvar Posts2 =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Posts2, _Component);\n\n  function Posts2(props) {\n    var _this;\n\n    _classCallCheck(this, Posts2);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Posts2).call(this, props));\n    _this.state = {\n      data: {}\n    };\n    _this.fetchPostData = _this.fetchPostData.bind(_assertThisInitialized(_this));\n    _this.renderPosts = _this.renderPosts.bind(_assertThisInitialized(_this));\n    _this.populatePageAfterFetch = _this.populatePageAfterFetch.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Posts2, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchPostData();\n    }\n  }, {\n    key: \"fetchPostData\",\n    value: function fetchPostData() {\n      var _this2 = this;\n\n      fetch(\"http://localhost/codeformylife/wp-json/wp/v2/posts?per_page=100\").then(function (response) {\n        return response.json();\n      }).then(function (myJSON) {\n        var objLength = _Object$keys(myJSON).length;\n\n        var newState = _this2.state;\n        console.log(\"newState\", newState);\n\n        for (var i = 0; i < objLength; i++) {\n          var objKey = _Object$values(myJSON)[i].title.rendered;\n\n          console.log(objKey);\n          var currentPost = newState.data[objKey];\n          console.log(\"newState\", newState.data[objKey]);\n          currentPost = {};\n          currentPost.name = _Object$values(myJSON)[i].title.rendered;\n          console.log(\"curr name\", currentPost.name);\n          currentPost.excerpt = _Object$values(myJSON)[i].excerpt.rendered;\n          console.log(\"curr excerpt\", currentPost.excerpt);\n          currentPost.featured_image = _Object$values(myJSON)[i]['featured_image_url'];\n          console.log(\"curr featured_image\", currentPost.featured_image);\n        }\n\n        _this2.setState(newState);\n      });\n    }\n  }, {\n    key: \"renderPosts\",\n    value: function renderPosts() {\n      var _this3 = this;\n\n      if (this.state.data) {\n        var postsArray = _Object$values(this.state.data);\n\n        console.log(postsArray);\n        return _Object$values(postsArray).map(function (post, index) {\n          return _this3.populatePageAfterFetch(post, index);\n        });\n      }\n    }\n  }, {\n    key: \"populatePageAfterFetch\",\n    value: function populatePageAfterFetch(post, index) {\n      // if (this.state.data) {\n      return React.createElement(\"div\", {\n        key: index,\n        index: index\n      }, React.createElement(\"h2\", {\n        className: \"name\"\n      }, post.title), React.createElement(\"div\", {\n        className: \"excerpt\",\n        dangerouslySetInnerHTML: {\n          __html: post.excerpt\n        }\n      }), React.createElement(\"img\", {\n        className: \"featured_image\",\n        src: post.featured_image,\n        alt: post.name\n      })); // }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, null, React.createElement(\"h1\", null, \"Posts\"), React.createElement(\"div\", null, this.renderPosts()));\n    }\n  }]);\n\n  return Posts2;\n}(Component);\n\nexport { Posts2 as default };","map":{"version":3,"sources":["/Users/marikakononen/Koodaus/KoodausProjektit/GitHub/HeadlessWordPressWithReact/pages/Posts2.js"],"names":["React","Component","Posts2","props","state","data","fetchPostData","bind","renderPosts","populatePageAfterFetch","fetch","then","response","json","myJSON","objLength","length","newState","console","log","i","objKey","title","rendered","currentPost","name","excerpt","featured_image","setState","postsArray","map","post","index","__html"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nexport default class Posts2 extends Component {\n  \n  constructor(props) {\n    super(props);\n    this.state = { data: {} };\n  \n    this.fetchPostData = this.fetchPostData.bind(this);\n    this.renderPosts = this.renderPosts.bind(this);\n    this.populatePageAfterFetch = this.populatePageAfterFetch.bind(this);\n    \n  }\n\n  componentDidMount() {\n    this.fetchPostData();\n  }\n\n  fetchPostData() {\n    fetch(`http://localhost/codeformylife/wp-json/wp/v2/posts?per_page=100`)\n      .then(response => response.json())\n      .then(myJSON => {\n        let objLength = Object.keys(myJSON).length;\n        let newState = this.state;\n        console.log(\"newState\", newState)\n      \n        for (let i = 0; i < objLength; i++) {\n          let objKey = Object.values(myJSON)[i].title.rendered;\n          console.log(objKey)\n          let currentPost = newState.data[objKey];\n          console.log(\"newState\",newState.data[objKey])\n          currentPost = {};\n          currentPost.name = Object.values(myJSON)[i].title.rendered;\n          console.log(\"curr name\",currentPost.name)\n          currentPost.excerpt = Object.values(myJSON)[i].excerpt.rendered;\n          console.log(\"curr excerpt\",currentPost.excerpt)\n          currentPost.featured_image = Object.values(myJSON)[i]['featured_image_url'];\n          console.log(\"curr featured_image\",currentPost.featured_image)  \n               \n        }\n      \n      this.setState(newState);\n      });\n  }\n  \n  renderPosts() {\n    if (this.state.data) {\n      const postsArray = Object.values(this.state.data)\n      console.log(postsArray)\n      return Object.values(postsArray).map((post, index) => this.populatePageAfterFetch(post, index));\n    }\n  }\n\n  populatePageAfterFetch(post, index) {\n   // if (this.state.data) {\n\n      return (\n        <div key={index} index={index}> \n          <h2 className=\"name\">{post.title}</h2> \n          <div className=\"excerpt\" dangerouslySetInnerHTML={{__html: post.excerpt}} />\n          <img className=\"featured_image\" src={post.featured_image} alt={post.name} />\n        </div>\n      )\n   // }\n  }\n\n  render() {\n      return (\n      <>\n        <h1>Posts</h1>\n        <div>{this.renderPosts()}</div>\n      </>\n      )\n  }\n}"]},"metadata":{},"sourceType":"module"}