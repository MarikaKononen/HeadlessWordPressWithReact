{"ast":null,"code":"import _Object$values from \"@babel/runtime-corejs2/core-js/object/values\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React, { Component } from 'react';\n\nvar Posts2 =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Posts2, _Component);\n\n  function Posts2(props) {\n    var _this;\n\n    _classCallCheck(this, Posts2);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Posts2).call(this, props));\n    _this.state = {\n      data: {}\n    };\n    _this.fetchPostData = _this.fetchPostData.bind(_assertThisInitialized(_this));\n    _this.renderPosts = _this.renderPosts.bind(_assertThisInitialized(_this));\n    _this.populatePageAfterFetch = _this.populatePageAfterFetch.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Posts2, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchPostData();\n    }\n  }, {\n    key: \"fetchPostData\",\n    value: function fetchPostData() {\n      var _this2 = this;\n\n      fetch(\"http://localhost/codeformylife/wp-json/wp/v2/posts?per_page=100\").then(function (response) {\n        return response.json();\n      }).then(function (myJSON) {\n        var objLength = _Object$keys(myJSON).length;\n\n        var newState = _this2.state;\n\n        for (var i = 0; i < objLength; i++) {\n          var objKey = _Object$values(myJSON)[i].title.rendered;\n\n          var currentPost = newState.data[objKey];\n          currentPost = {};\n          currentPost.name = _Object$values(myJSON)[i].title.rendered;\n          currentPost.excerpt = _Object$values(myJSON)[i].excerpt.rendered;\n          currentPost.featured_image = _Object$values(myJSON)[i]['featured_image_url'];\n        }\n\n        _this2.setState(newState);\n      });\n    }\n  }, {\n    key: \"renderPosts\",\n    value: function renderPosts() {\n      var _this3 = this;\n\n      if (this.state.data) {\n        var postsArray = _Object$values(this.state.data);\n\n        console.log(this.state.data);\n        return _Object$values(postsArray).map(function (post, index) {\n          return _this3.populatePageAfterFetch(post, index);\n        });\n      }\n    }\n  }, {\n    key: \"populatePageAfterFetch\",\n    value: function populatePageAfterFetch(post, index) {\n      if (this.state.data) {\n        return React.createElement(\"div\", {\n          key: index,\n          index: index\n        }, React.createElement(\"h2\", {\n          className: \"name\"\n        }, post.name), React.createElement(\"div\", {\n          className: \"excerpt\",\n          dangerouslySetInnerHTML: {\n            __html: post.x\n          }\n        }), React.createElement(\"img\", {\n          className: \"featured_image\",\n          src: post.featured_image,\n          alt: post.name\n        }));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, null, React.createElement(\"h1\", null, \"Posts\"), React.createElement(\"div\", null, this.renderPosts()));\n    }\n  }]);\n\n  return Posts2;\n}(Component);\n\nexport { Posts2 as default };","map":{"version":3,"sources":["/Users/marikakononen/Koodaus/KoodausProjektit/GitHub/HeadlessWordPressWithReact/pages/Posts2.js"],"names":["React","Component","Posts2","props","state","data","fetchPostData","bind","renderPosts","populatePageAfterFetch","fetch","then","response","json","myJSON","objLength","length","newState","i","objKey","title","rendered","currentPost","name","excerpt","featured_image","setState","postsArray","console","log","map","post","index","__html","x"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;IAEqBC,M;;;;;AAEnB,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,gFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAb;AAEA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBC,IAAnB,+BAArB;AACA,UAAKC,WAAL,GAAmB,MAAKA,WAAL,CAAiBD,IAAjB,+BAAnB;AACA,UAAKE,sBAAL,GAA8B,MAAKA,sBAAL,CAA4BF,IAA5B,+BAA9B;AANiB;AAQlB;;;;wCAEmB;AAClB,WAAKD,aAAL;AACD;;;oCAEe;AAAA;;AACdI,MAAAA,KAAK,mEAAL,CACGC,IADH,CACQ,UAAAC,QAAQ;AAAA,eAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,OADhB,EAEGF,IAFH,CAEQ,UAAAG,MAAM,EAAI;AACd,YAAIC,SAAS,GAAG,aAAYD,MAAZ,EAAoBE,MAApC;;AACA,YAAIC,QAAQ,GAAG,MAAI,CAACb,KAApB;;AAEA,aAAK,IAAIc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,SAApB,EAA+BG,CAAC,EAAhC,EAAoC;AAClC,cAAIC,MAAM,GAAG,eAAcL,MAAd,EAAsBI,CAAtB,EAAyBE,KAAzB,CAA+BC,QAA5C;;AACA,cAAIC,WAAW,GAAGL,QAAQ,CAACZ,IAAT,CAAcc,MAAd,CAAlB;AAEAG,UAAAA,WAAW,GAAG,EAAd;AACAA,UAAAA,WAAW,CAACC,IAAZ,GAAmB,eAAcT,MAAd,EAAsBI,CAAtB,EAAyBE,KAAzB,CAA+BC,QAAlD;AACAC,UAAAA,WAAW,CAACE,OAAZ,GAAsB,eAAcV,MAAd,EAAsBI,CAAtB,EAAyBM,OAAzB,CAAiCH,QAAvD;AACAC,UAAAA,WAAW,CAACG,cAAZ,GAA6B,eAAcX,MAAd,EAAsBI,CAAtB,EAAyB,oBAAzB,CAA7B;AAED;;AAEH,QAAA,MAAI,CAACQ,QAAL,CAAcT,QAAd;AACC,OAlBH;AAmBD;;;kCAEa;AAAA;;AACZ,UAAI,KAAKb,KAAL,CAAWC,IAAf,EAAqB;AACnB,YAAMsB,UAAU,GAAG,eAAc,KAAKvB,KAAL,CAAWC,IAAzB,CAAnB;;AACAuB,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKzB,KAAL,CAAWC,IAAvB;AACA,eAAO,eAAcsB,UAAd,EAA0BG,GAA1B,CAA8B,UAACC,IAAD,EAAOC,KAAP;AAAA,iBAAiB,MAAI,CAACvB,sBAAL,CAA4BsB,IAA5B,EAAkCC,KAAlC,CAAjB;AAAA,SAA9B,CAAP;AACD;AACF;;;2CAEsBD,I,EAAMC,K,EAAO;AAClC,UAAI,KAAK5B,KAAL,CAAWC,IAAf,EAAqB;AAEnB,eACE;AAAK,UAAA,GAAG,EAAE2B,KAAV;AAAiB,UAAA,KAAK,EAAEA;AAAxB,WACE;AAAI,UAAA,SAAS,EAAC;AAAd,WAAsBD,IAAI,CAACR,IAA3B,CADF,EAEE;AAAK,UAAA,SAAS,EAAC,SAAf;AAAyB,UAAA,uBAAuB,EAAE;AAACU,YAAAA,MAAM,EAAEF,IAAI,CAACG;AAAd;AAAlD,UAFF,EAGE;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAgC,UAAA,GAAG,EAAEH,IAAI,CAACN,cAA1C;AAA0D,UAAA,GAAG,EAAEM,IAAI,CAACR;AAApE,UAHF,CADF;AAOD;AACF;;;6BAEQ;AACL,aACA,0CACE,wCADF,EAEE,iCAAM,KAAKf,WAAL,EAAN,CAFF,CADA;AAMH;;;;EAlEiCP,S;;SAAfC,M","sourcesContent":["import React, { Component } from 'react';\n\nexport default class Posts2 extends Component {\n  \n  constructor(props) {\n    super(props);\n    this.state = { data: {} };\n  \n    this.fetchPostData = this.fetchPostData.bind(this);\n    this.renderPosts = this.renderPosts.bind(this);\n    this.populatePageAfterFetch = this.populatePageAfterFetch.bind(this);\n    \n  }\n\n  componentDidMount() {\n    this.fetchPostData();\n  }\n\n  fetchPostData() {\n    fetch(`http://localhost/codeformylife/wp-json/wp/v2/posts?per_page=100`)\n      .then(response => response.json())\n      .then(myJSON => {\n        let objLength = Object.keys(myJSON).length;\n        let newState = this.state;\n      \n        for (let i = 0; i < objLength; i++) {\n          let objKey = Object.values(myJSON)[i].title.rendered;\n          let currentPost = newState.data[objKey];\n          \n          currentPost = {};\n          currentPost.name = Object.values(myJSON)[i].title.rendered;\n          currentPost.excerpt = Object.values(myJSON)[i].excerpt.rendered;\n          currentPost.featured_image = Object.values(myJSON)[i]['featured_image_url'];\n                   \n        }\n      \n      this.setState(newState);\n      });\n  }\n  \n  renderPosts() {\n    if (this.state.data) {\n      const postsArray = Object.values(this.state.data)\n      console.log(this.state.data)\n      return Object.values(postsArray).map((post, index) => this.populatePageAfterFetch(post, index));\n    }\n  }\n\n  populatePageAfterFetch(post, index) {\n    if (this.state.data) {\n\n      return (\n        <div key={index} index={index}> \n          <h2 className=\"name\">{post.name}</h2> \n          <div className=\"excerpt\" dangerouslySetInnerHTML={{__html: post.x}} />\n          <img className=\"featured_image\" src={post.featured_image} alt={post.name} />\n        </div>\n      )\n    }\n  }\n\n  render() {\n      return (\n      <>\n        <h1>Posts</h1>\n        <div>{this.renderPosts()}</div>\n      </>\n      )\n  }\n}"]},"metadata":{},"sourceType":"module"}